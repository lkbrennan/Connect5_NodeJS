<html>
	<link rel="stylesheet" 
		href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
		crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
	  var socket = io();
	</script>
	<style>
		#messageArea{
			display:none;
		}
	</style>
	<title> Connect 5 </title>
   <body>
		<div class="container">
			<div class="row" id="userArea">
				<div class="col-md-4">
					<form id="user-form">
						<div class="form-group">
							<label>Enter Username</label>
							<input class="form-control" id="username"/>
							<br/>
							<input type="submit" class="btn btn-primary" value="Login" />
						</div>
					</form>
				</div>
			</div>
			<div class="row" id="messageArea">
				<div class="col-md-4">
					<div class="well">
						<h3>Online Users</h3>
						<ul class="list-groups" id="users">
						</ul>
					</div>
				</div>
				<div class="col-md-8">
					<div class="chat" id="chat">
						<form id="message-form">
							<div class="form-group">
								<label>Enter Message</label>
								<textarea class="form-control" id="message"></textarea>
								<br/>
								<input type="submit" class="btn btn-primary" value="Send Message" />
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<script>
			$(function(){
				var socket = io.connect();
				var $messageArea = $('#messageArea');
				var $messageForm = $('#message-form');
				var $message = $('#message');
				var $chat = $('#chat');
				var $userArea = $('#userArea');
				var $userForm = $('#user-form');
				var $username = $('#username');
				var $users = $('#users');
				
				$messageForm.submit(function(e){
					e.preventDefault();
					socket.emit('send message', $message.val());
					$message.val('');
				});
				
				$userForm.submit(function(e){
					e.preventDefault();
					socket.emit('new user', $username.val(), function(data){
						if(data){
							$userArea.hide();
							$messageArea.show();
						}
					});
					$username.val('');
				});
				
				socket.on('get users', function(data){
					var html = '';
					for(i=0;i<data.length;i++){
						html += '<li class="list-group-item">'+'Player ' +(i+1)+':'+data[i]+'</li>'
					}
					$users.html(html);
				});
	
			});
		</script>
   </body>
</html>